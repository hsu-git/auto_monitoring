name: ğŸ“¢ ìë™ ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§

on:
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
  schedule:
    - cron: "0 * * * *"  # ë§¤ ì •ê° ì‹¤í–‰ (UTC ê¸°ì¤€, í•œêµ­ ì‹œê°„ KST = UTC+9)

env:
  TZ: "Asia/Seoul"  # ğŸ•’ GitHub Actions ì‹¤í–‰ ì‹œê°„ì„ KSTë¡œ ë³€ê²½
  
jobs:
  monitor-news:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸš€ ì €ì¥ì†Œì—ì„œ ì½”ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
        uses: actions/checkout@v4

      - name: â˜• Java 17 ì„¤ì •
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: '17'

      - name: ğŸ› ï¸ Java ì½”ë“œ ì»´íŒŒì¼ ë° ì‹¤í–‰
        run: |
          javac App.java
          java App
        env:
          KEYWORD: ${{ vars.KEYWORD }}
          NAVER_CLIENT_ID: ${{ secrets.NAVER_CLIENT_ID }}
          NAVER_CLIENT_SECRET: ${{ secrets.NAVER_CLIENT_SECRET }}
          OPEN_API_KEY: ${{ secrets.OPEN_API_KEY }}
          OPEN_API_URL: ${{ secrets.OPEN_API_URL }}
          OPEN_API_MODEL: ${{ secrets.OPEN_API_MODEL }}
          LLM_PROMPT_CATEGORIZE: ${{ vars.LLM_PROMPT_CATEGORIZE }}
          SLACK_WEBHOOK_TITLE: ${{ vars.SLACK_WEBHOOK_TITLE }}
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

      - name: ğŸ“‚ ì‹¤í–‰ ê²°ê³¼ íŒŒì¼ ì»¤ë°‹
        run: |
          TIMESTAMP=$(date '+%Y-%m-%d %H:%M')
          git config --global user.name "${{ github.actor }}"
          git config --global user.email "${{ github.actor }}@users.noreply.github.com"
          git add .
          git commit -m "ğŸ“° ìë™ ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§ ì‹¤í–‰ ì™„ë£Œ ($TIMESTAMP KST)"
          git push


# name: ìë™ ëª¨ë‹ˆí„°ë§

# on:
#     workflow_dispatch:
#     schedule:
#         - cron: "0 * * * *"  # ğŸ•› ë§¤ ì •ê°(00ë¶„)ì— ì‹¤í–‰

# jobs:
#     monitor-news:
#         runs-on: ubuntu-latest
#         steps:
#           - name: ğŸ“¥ ì €ì¥ì†Œì—ì„œ ì½”ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
#             uses: actions/checkout@v4
    
#           - name: âš™ï¸ Java 17 ì„¤ì •
#             uses: actions/setup-java@v4
#             with:
#               distribution: temurin
#               java-version: '17'
    
#           - name: ğŸ› ï¸ Java ì½”ë“œ ì»´íŒŒì¼ ë° ì‹¤í–‰
#             run: |
#               javac App.java
#               java App
#             env:
#               KEYWORD: ${{ vars.KEYWORD }}  # ğŸ” ê²€ìƒ‰ í‚¤ì›Œë“œ
#               NAVER_CLIENT_ID: ${{ secrets.NAVER_CLIENT_ID }}  # ğŸŸ¢ ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸ ID
#               NAVER_CLIENT_SECRET: ${{ secrets.NAVER_CLIENT_SECRET }}  # ğŸŸ¢ ë„¤ì´ë²„ API í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿
#               OPEN_API_KEY: ${{ secrets.OPEN_API_KEY }}  # ğŸŸ¢ Together API í‚¤ (LLM)
#               OPEN_API_URL: ${{ secrets.OPEN_API_URL }}  # ğŸŸ¢ Together API URL (LLM)
#               OPEN_API_MODEL: ${{ secrets.OPEN_API_MODEL }}  # ğŸŸ¢ Together API ëª¨ë¸ëª… (ì˜ˆ: "gpt-4")
#               LLM_PROMPT: ${{ vars.LLM_PROMPT }}  # ğŸŸ¢ Together API í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
#               SLACK_WEBHOOK_TITLE: ${{ vars.SLACK_WEBHOOK_TITLE }}  # ğŸŸ¢ Slack ë©”ì‹œì§€ ì œëª©
#               SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}  # ğŸŸ¢ Slack Webhook URL (ìš”ì•½ëœ ë‰´ìŠ¤ ì „ì†¡)


#           - name: ğŸ“‚ ì‹¤í–‰ ê²°ê³¼ íŒŒì¼ ì»¤ë°‹
#             run: |
#               TIMESTAMP=$(date '+%Y-%m-%d %H:%M')  # ğŸŸ¢ í˜„ì¬ ë‚ ì§œ ì €ì¥
#               git config --global user.name "${{ github.actor }}"
#               git config --global user.email "${{ github.actor }}@users.noreply.github.com"
#               git add .
#               git commit -m "ğŸ“° ìë™ ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§: LLM ìš”ì•½ ìƒì„± ë° Slack ì „ì†¡ ì™„ë£Œ ($TIMESTAMP)"
#               git push
  
#           # - name: ğŸ“‚ ì‹¤í–‰ ê²°ê³¼ íŒŒì¼ ì»¤ë°‹
#           #   uses: EndBug/add-and-commit@v9
#           #   with:
#           #       author_name: ${{ github.actor }}
#           #       author_email: ${{ github.actor }}@users.noreply.github.com
#           #       message: "ğŸ“° ìë™ ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§: LLM ìš”ì•½ ìƒì„± ë° Slack ì „ì†¡ ì™„ë£Œ ($(date '+%Y-%m-%d %H:%M')) âœ…"
#           #       add: "."

#           # - name: ğŸ“¤ ì‹¤í–‰ ë¡œê·¸ ì—…ë¡œë“œ (ë””ë²„ê¹…ìš©)
#           #   if: always()
#           #   uses: actions/upload-artifact@v4
#           #   with:
#           #       name: logs
#           #       path: "*.txt"




# name: ìë™ ëª¨ë‹ˆí„°ë§

# on:
#     workflow_dispatch:
#     schedule:
#         # - cron: "*/5 * * * *"  # ë§¤ 5ë¶„ë§ˆë‹¤ ì‹¤í–‰ (ë³´ì¥ ì•ˆë¨)
#         - cron: "0 * * * *"  # ë§¤ ì •ê°(00ë¶„)ì— ì‹¤í–‰


# jobs:
#     make-file:
#         runs-on: ubuntu-latest
#         steps:
#           - name: ì €ì¥ì†Œì— ìˆëŠ” íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
#             uses: actions/checkout@v4
    
#           - name: Java 17 ì„¸íŒ…
#             uses: actions/setup-java@v4
#             with:
#               distribution: temurin
#               java-version: '17'
    
#           - name: ì»´íŒŒì¼ ë° ì½”ë“œ ì‹¤í–‰
#             run: |
#               javac App.java
#               java App
#             env:
#               KEYWORD: ${{ vars.KEYWORD }}
#               NAVER_CLIENT_ID: ${{ secrets.NAVER_CLIENT_ID }}
#               NAVER_CLIENT_SECRET: ${{ secrets.NAVER_CLIENT_SECRET }}
        
#           - name: ì‹¤í–‰ ê²°ê³¼ë¡œ ë‚˜ì˜¨ íŒŒì¼ì„ ì»¤ë°‹
#             uses: EndBug/add-and-commit@v9
#             with:
#                 author_name: ${{ github.actor }}
#                 author_email: ${{ github.actor }}@users.noreply.github.com
#                 message: "ëª¨ë‹ˆí„°ë§ íŒŒì¼ ì €ì¥"
#                 add: "."